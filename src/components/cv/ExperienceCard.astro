---
interface Props {
  index: number;
  role: string;
  company: string;
  location: string;
  period: string;
  current?: boolean;
  keywords: string[];
  accomplishments: string[];
}

const { index, role, company, location, period, current = false, keywords, accomplishments } = Astro.props;
const formattedIndex = index.toString().padStart(2, '0');
---

<article class="group relative">
  <!-- Card Container -->
  <div class="relative pl-16 md:pl-20 pb-12 last:pb-0">
    <!-- Index Number -->
    <div class="absolute left-0 top-0 flex items-center justify-center">
      <span class="text-4xl md:text-5xl font-bold text-base-content/[0.06] group-hover:text-base-content/[0.12] transition-colors duration-300 select-none">
        {formattedIndex}
      </span>
    </div>

    <!-- Vertical Line -->
    <div class="absolute left-8 md:left-10 top-14 bottom-0 w-px bg-gradient-to-b from-base-300/80 via-base-300/40 to-transparent"></div>

    <!-- Content Card -->
    <div class="relative border border-base-300/60 rounded-xl p-5 md:p-6 bg-base-100 hover:border-base-300 hover:shadow-sm transition-all duration-300">
      <!-- Header -->
      <header class="mb-4">
        <div class="flex flex-wrap items-start justify-between gap-2 mb-2">
          <div class="flex items-center gap-2">
            <h3 class="text-lg font-semibold text-base-content tracking-tight">
              {company}
            </h3>
            {current && (
              <span class="inline-flex items-center gap-1.5 px-2 py-0.5 text-[10px] font-medium uppercase tracking-wider bg-success/15 text-success rounded-full border border-success/25">
                <span class="w-1.5 h-1.5 rounded-full bg-success animate-pulse"></span>
                Current
              </span>
            )}
          </div>
        </div>

        <p class="text-sm font-medium text-base-content/80 mb-1">{role}</p>

        <div class="flex items-center gap-2 text-xs text-base-content/50">
          <span class="inline-flex items-center gap-1">
            <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 11-6 0 3 3 0 016 0z" />
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1115 0z" />
            </svg>
            {location}
          </span>
          <span class="text-base-content/30">Â·</span>
          <span class="inline-flex items-center gap-1">
            <svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 012.25-2.25h13.5A2.25 2.25 0 0121 7.5v11.25m-18 0A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75m-18 0v-7.5A2.25 2.25 0 015.25 9h13.5A2.25 2.25 0 0121 11.25v7.5" />
            </svg>
            {period}
          </span>
        </div>
      </header>

      <!-- Accomplishments -->
      <ul class="space-y-2.5 mb-5">
        {accomplishments.map((item, i) => (
          <li class="flex gap-3 text-sm text-base-content/70 leading-relaxed">
            <span class="flex-shrink-0 w-1 h-1 rounded-full bg-base-content/30 mt-2"></span>
            <span>{item}</span>
          </li>
        ))}
      </ul>

      <!-- Keywords -->
      <footer class="pt-4 border-t border-base-300/50">
        <div class="flex flex-wrap gap-1.5">
          {keywords.map((keyword) => (
            <span class="px-2 py-0.5 text-[11px] font-medium text-base-content/60 bg-base-200/60 rounded-md hover:bg-base-200 hover:text-base-content/80 transition-colors">
              {keyword}
            </span>
          ))}
        </div>
      </footer>
    </div>
  </div>
</article>
